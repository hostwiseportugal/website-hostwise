---
import Layout from '../../../layouts/Layout.astro';
import regionPorto from '../../../assets/images/regions/porto.webp';
import regionAlgarve from '../../../assets/images/regions/algarve.webp';
import regionDouro from '../../../assets/images/regions/douro.webp';
import HeroSectionV2 from '../../../components/HeroSectionV2.astro';
import IntroSectionWStats from '../../../components/IntroSectionWStats.astro';
import ManagementBenefitsCards from '../../../components/ManagementBenefitsCards.astro';
import AnimatedStats from '../../../components/AnimatedStats.astro';
import FeaturesAccordion from '../../../components/FeaturesAccordion.astro';
import PlatformsMarquee from '../../../components/PlatformsMarquee.astro';
import ModelsIntro from '../../../components/ModelsIntro.astro';
import GuaranteedRentSection from '../../../components/GuaranteedRentSection.astro';
import PricingSection from '../../../components/PricingSection.astro';
import RegionsCarousel from '../../../components/RegionsCarousel.astro';
import OwnerTestimonials from '../../../components/OwnerTestimonials.astro';
import FAQSection from '../../../components/FAQSection.astro';
import { serviceSchema } from "../../../lib/schema/service";
import { faqPageSchemaFromCategories } from "../../../lib/schema/faq-from-categories";
import { breadcrumbSchema } from "../../../lib/schema/breadcrumbs";


const apiBase = import.meta.env.WORDPRESS_API_URL;
const PAGE_ID = 877;
const res = await fetch(`${apiBase}/pages/${PAGE_ID}?lang=en&_embed`);
const page = await res.json();
const acf = page.acf || {};

const serviceName = "Vacation Rental Management";

const faqCategoriesData =
  (acf.faq_categories || []).map((cat: any) => ({
    id: cat.faq_category_id,
    label: cat.faq_category_label,
    questions: (cat.faq_items || []).map((item: any) => ({
      question: item.faq_question,
      answer: item.faq_answer,
    })),
  })) || [];

const site = Astro.site ?? new URL("https://www.hostwise.pt");
const canonicalUrl = new URL(Astro.url); canonicalUrl.search = "";
const canonical = canonicalUrl.href;

const breadcrumbs = breadcrumbSchema([
  { name: "Home", url: new URL("/en", site).href },
  { name: "Vacation Rental Management", url: canonical },
]);

const schemas = [
  breadcrumbs,
  serviceSchema({
    serviceName,
    url: canonical,
    providerUrl: "https://www.hostwise.pt",
    areaServed: [{ name: "Portugal", type: "Country" }],
  }),
  ...(faqCategoriesData.length ? [faqPageSchemaFromCategories(faqCategoriesData)] : []),
];

const testimonialsData = (acf.owner_testimonials || []).map((t: any) => ({
  name: t.owner_testimonial_name,
  location: t.owner_testimonial_location,
  property: t.owner_testimonial_property,
  rating: Number(t.owner_testimonial_rating) || 0,
  comment: t.owner_testimonial_comment,
}));

const alternates = [
  {
    hreflang: "pt-PT",
    href: "https://www.hostwise.pt/gestao-alojamento-local",
  },
  {
    hreflang: "en",
    href: "https://www.hostwise.pt/en/vacation-rental-management",
  },
  {
    hreflang: "x-default",
    href: "https://www.hostwise.pt/gestao-alojamento-local",
  },
];
---

<Layout title={serviceName}
  description="End-to-end vacation rental management with dynamic pricing, professional operations and focus on your property's profitability. Discover the Host Wise approach."
  canonical={canonical}
  alternates={alternates}
  schemas={schemas}>
  <!-- Hero Section -->
  <HeroSectionV2
    badge_text={acf.hero_v2_badge_text}
    badge_icon_key={acf.hero_v2_badge_icon}
    heading={acf.hero_v2_heading}
    description={acf.hero_v2_description}
    features={acf.hero_v2_features}
    primary_cta_label={acf.hero_v2_primary_cta_label}
    primary_cta_url={acf.hero_v2_primary_cta_url}
    secondary_cta_label={acf.hero_v2_secondary_cta_label}
    secondary_cta_url={acf.hero_v2_secondary_cta_url}
    image={acf.hero_v2_image}
    stats={acf.hero_v2_stats}
  />

  <!-- Intro Section -->
  <IntroSectionWStats
    title={acf.intro_title}
    paragraphs={acf.intro_paragraphs}
    ctaLabel={acf.intro_cta_label}
    ctaUrl={acf.intro_cta_url}
    stats={acf.intro_stats}
  />

  <ManagementBenefitsCards
    title={acf.benefits_title}
    benefits={acf.benefits_list}
  />

  <!-- Animated Stats -->
  <AnimatedStats stats={acf.animated_stats} />

  <!-- Features Accordion -->
  <FeaturesAccordion
    section_title={acf.section_title}
    section_subtitle={acf.section_subtitle}

    owners_title={acf.owners_title}
    owners_subtitle={acf.owners_subtitle}
    owners_image={acf.owners_image?.url}
    owners_features={acf.owners_features}
    owners_tab_label="Property Management"

    guests_title={acf.guests_title}
    guests_subtitle={acf.guests_subtitle}
    guests_image={acf.guests_image?.url}
    guests_features={acf.guests_features}
    guests_tab_label="Guest Experience"

    cta_label={acf.cta_label}
    cta_url={acf.cta_url}
  />

  <!-- Platforms Marquee -->
  <PlatformsMarquee
    section_badge={acf.section_badge}
    section_title={acf.section_title}
    section_subtitle={acf.section_subtitle}
    platforms={acf.platforms}
  />

  <!-- Models Intro -->
  <ModelsIntro
    title={acf.models_intro_title}
    paragraphs={acf.models_intro_paragraphs}
    models={acf.models_intro_cards}
    ctaTitle={acf.models_cta_title}
    ctaText={acf.models_cta_text}
    ctaButtonLabel={acf.models_cta_button_label}
    ctaButtonUrl={acf.models_cta_button_url}
  />

  <!-- Guaranteed Rent Section -->
  <GuaranteedRentSection
    sectionId="guaranteed-income"
    badgeText="Guaranteed Income"
    defaultAmount="1,200"
    period="/month"
    amountNote="*Personalised amount after property assessment"
    guaranteeBadgeText="100% Guaranteed Every Month"
    stat1Value="0%"
    stat1Label="Vacancy Risk"
    stat2Value="100%"
    stat2Label="Predictability"
    heading="Prefer Total Security?<br>Receive a Guaranteed Fixed Amount."
    leadText="Forget about occupancy worries. With our <strong>Guaranteed Income</strong> model, you receive a fixed amount every month, regardless of everything."
    benefits={[
      { title: 'Fixed Monthly Income', text: 'Guaranteed amount in your account, with no variations' },
      { title: 'Zero Worries', text: 'No concerns about occupancy, maintenance or utilities' },
      { title: 'Long-Term Contracts', text: 'Security of 3 to 10 years with punctual payments' },
    ]}
    ctaPrimaryLabel="Request an Assessment"
    ctaPrimaryUrl="https://hostwise.typeform.com/to/pWgP4EuZ"
    ctaSecondaryLabel="Learn More About This Model"
    ctaSecondaryUrl="/en/rent-to-rent"
    infoNote="Ideal for owners who value predictability and peace of mind over variable earnings potential."
    amounts={['800', '1,200', '1,500', '1,800', '2,200', '2,800', '3,200']}
  />

  <!-- Pricing Section -->
  <PricingSection
    title="Choose the Ideal Commission Plan for Your Property"
    description="With our commission model, you have the freedom to choose the management level that best suits your profile. Check the available options and discover how we can make your property profitable with full transparency."
    shortTermLabel="Short-Term"
    midTermLabel="Mid-Term"
    startingText="from"
    shortTermPlans={[
      {
        badge: null,
        name: "Pricing Management",
        commission: "9%",
        description: "Ideal for owners who want to keep operational control",
        features: [
          "Listing creation and optimisation",
          "Presence on major platforms",
          "Daily pricing management and optimisation",
          "Payment management"
        ],
        cta: { text: "Choose This Plan", href: "https://hostwise.typeform.com/to/pWgP4EuZ" }
      },
      {
        badge: "Most Popular",
        name: "Full Service",
        commission: "19%",
        description: "100% dedicated management - don't worry about a thing",
        features: [
          "All Pricing Management services",
          "Property maintenance support",
          "Professional cleaning service",
          "Access to the Owner Portal",
          "24/7 guest communication",
          "UCFE/SEF communication",
          "Tourist tax payment",
          "Invoicing service",
          "Quality control inspections",
          "Professional photography support",
          "Guest verification",
          "Toiletries",
          "Automated check-in"
        ],
        cta: { text: "Choose This Plan", href: "https://hostwise.typeform.com/to/pWgP4EuZ" }
      }
    ]}
    midTermPlans={[
      {
        badge: null,
        name: "Mid-Term Management",
        commission: "14%",
        description: "For 1 to 12-month rentals with stability",
        features: [
          "Listing creation and optimisation",
          "Presence on specialised major platforms",
          "Guest verification",
          "Rent, deposit and expense collection",
          "Pricing management and optimisation",
          "24/7 guest communication",
          "End-of-stay inspection and deposit return",
          "Invoicing and legal compliance management"
        ],
        cta: { text: "Choose This Plan", href: "https://hostwise.typeform.com/to/pWgP4EuZ" }
      }
    ]}
    footerNote="Commission on gross revenue. The commission will depend on the property profile, its location and the contract duration."
  />

  <!-- Regions Carousel -->
  <RegionsCarousel
    sectionTitle="Where We Operate"
    sectionSubtitle="Established presence in Portugal's most sought-after regions"
    regions={[
      {
        name: 'Porto',
        tag: 'The Unvanquished City',
        title: 'History, culture and high tourist demand',
        description: 'Portugal\'s second-largest city attracts millions of visitors every year. With our specialised management, ensure maximum occupancy for your property.',
        image: regionPorto,
        url: '/en/vacation-rental-management/porto'
      },
      {
        name: 'Algarve',
        tag: 'Sun & Beach',
        title: 'Portugal\'s most popular holiday destination',
        description: 'Paradise beaches, exceptional climate and world-class golf. The Algarve offers unmatched return on investment all year round.',
        image: regionAlgarve,
        url: '/en/vacation-rental-management/algarve'
      },
      {
        name: 'Douro',
        tag: 'World Heritage',
        title: 'Premium tourism in unique landscapes',
        description: 'Terraced vineyards, historic estates and wine & gastronomy experiences. The Douro attracts luxury tourists willing to pay premium rates.',
        image: regionDouro,
        url: '/en/vacation-rental-management/douro'
      }
    ]}
    prevAriaLabel="Previous region"
    nextAriaLabel="Next region"
    dotAriaLabel="Go to slide"
    imageAltPrefix="Vacation rental management in"
  />

  <!-- Owner Testimonials -->
  <OwnerTestimonials
    badgeLabel={acf.owner_testimonials_badge_label}
    title={acf.owner_testimonials_title}
    subtitle={acf.owner_testimonials_subtitle}
    ctaTitle={acf.owner_testimonials_cta_title}
    ctaSubtitle={acf.owner_testimonials_cta_subtitle}
    ctaLabel={acf.owner_testimonials_cta_label}
    ctaUrl={acf.owner_testimonials_cta_url}
    testimonials={testimonialsData}
  />

  <!-- FAQ Section -->
  <FAQSection
    badgeLabel={acf.faq_badge_label}
    title={acf.faq_title}
    subtitle={acf.faq_subtitle}
    categories={faqCategoriesData}
    showCta={acf.faq_show_cta}
    ctaTitle={acf.faq_cta_title}
    ctaSubtitle={acf.faq_cta_subtitle}
    ctaLabel={acf.faq_cta_label}
    ctaUrl={acf.faq_cta_url}
  />
</Layout>

<style>
  /* Hero Section */
  .hero-alojamento {
    background: linear-gradient(135deg, #E5F4FE 0%, #fff 100%);
    padding: 120px 20px 80px;
    position: relative;
    overflow: hidden;
  }

  .hero-alojamento::before {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 50%;
    height: 100%;
    background:
      radial-gradient(circle at 80% 20%, rgba(92, 176, 214, 0.1) 0%, transparent 50%),
      radial-gradient(circle at 60% 80%, rgba(12, 68, 99, 0.05) 0%, transparent 50%);
    pointer-events: none;
  }

  .hero-container {
    max-width: 1400px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 80px;
    align-items: center;
    position: relative;
    z-index: 1;
  }

  .hero-content {
    display: flex;
    flex-direction: column;
  }

  .hero-text {
    display: flex;
    flex-direction: column;
    gap: 24px;
  }

  .hero-label {
    display: inline-block;
    width: fit-content;
    background: rgba(92, 176, 214, 0.15);
    color: var(--secondary);
    padding: 8px 20px;
    border-radius: 30px;
    font-size: 0.85rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .hero-alojamento h1 {
    font-size: 3.5rem;
    line-height: 1.1;
    color: var(--primary);
    font-weight: 700;
    margin: 0;
  }

  .hero-alojamento p {
    font-size: 1.2rem;
    line-height: 1.7;
    color: var(--text);
    opacity: 0.9;
    margin: 0;
  }

  .hero-buttons {
    display: flex;
    gap: 16px;
    flex-wrap: wrap;
    margin-top: 8px;
  }

  .btn-primary-hero {
    padding: 18px 36px;
    background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
    color: white;
    border-radius: 12px;
    font-size: 1.1rem;
    font-weight: 600;
    text-decoration: none;
    transition: all 0.3s;
    box-shadow: 0 4px 16px rgba(12, 68, 99, 0.2);
  }

  .btn-primary-hero:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(12, 68, 99, 0.3);
  }

  .btn-secondary-hero {
    padding: 18px 36px;
    background: white;
    color: var(--primary);
    border: 2px solid var(--primary);
    border-radius: 12px;
    font-size: 1.1rem;
    font-weight: 600;
    text-decoration: none;
    transition: all 0.3s;
  }

  .btn-secondary-hero:hover {
    background: var(--primary);
    color: white;
    transform: translateY(-2px);
  }

  .hero-trust-badges {
    display: flex;
    flex-wrap: wrap;
    gap: 24px;
    margin-top: 16px;
  }

  .trust-item {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.95rem;
    color: var(--text);
    font-weight: 500;
  }

  .trust-item svg {
    color: var(--secondary);
    flex-shrink: 0;
  }

  /* Hero Image */
  .hero-image {
    position: relative;
    border-radius: 24px;
    overflow: hidden;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
    aspect-ratio: 4/3;
  }

  .hero-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .hero-stats-float {
    position: absolute;
    bottom: 24px;
    left: 24px;
    right: 24px;
    display: flex;
    gap: 16px;
    flex-wrap: wrap;
  }

  .float-card {
    background: white;
    border-radius: 16px;
    padding: 16px 20px;
    display: flex;
    align-items: center;
    gap: 12px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
    backdrop-filter: blur(10px);
    flex: 1;
    min-width: 180px;
    animation: floatUp 0.6s ease forwards;
    opacity: 0;
  }

  .float-card-secondary {
    animation-delay: 0.2s;
  }

  @keyframes floatUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
    from {
      opacity: 0;
      transform: translateY(20px);
    }
  }

  .float-icon {
    width: 48px;
    height: 48px;
    background: var(--blue-light);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--secondary);
    flex-shrink: 0;
  }

  .float-content {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  .float-number {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--primary);
    line-height: 1;
  }

  .float-label {
    font-size: 0.85rem;
    color: var(--text);
    font-weight: 500;
  }

  /* Responsive */
  @media (max-width: 1024px) {
    .hero-alojamento {
      padding: 100px 20px 60px;
    }

    .hero-container {
      grid-template-columns: 1fr;
      gap: 50px;
    }

    .hero-alojamento h1 {
      font-size: 3rem;
    }

    .hero-image {
      order: -1;
    }
  }

  @media (max-width: 768px) {
    .hero-alojamento {
      padding: 90px 20px 50px;
    }

    .hero-alojamento h1 {
      font-size: 2.25rem;
    }

    .hero-alojamento p {
      font-size: 1.05rem;
    }

    .hero-buttons {
      flex-direction: column;
      width: 100%;
    }

    .btn-primary-hero,
    .btn-secondary-hero {
      width: 100%;
      text-align: center;
      padding: 16px 28px;
      font-size: 1rem;
    }

    .hero-trust-badges {
      flex-direction: column;
      gap: 12px;
    }

    .hero-stats-float {
      flex-direction: column;
      gap: 12px;
    }

    .float-card {
      min-width: auto;
    }
  }

  @media (max-width: 480px) {
    .hero-alojamento h1 {
      font-size: 1.875rem;
    }

    .hero-label {
      font-size: 0.75rem;
      padding: 6px 16px;
    }

    .float-card {
      padding: 12px 16px;
    }

    .float-icon {
      width: 40px;
      height: 40px;
    }

    .float-number {
      font-size: 1.25rem;
    }

    .float-label {
      font-size: 0.8rem;
    }
  }
</style>
