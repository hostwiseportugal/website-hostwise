---
import { getPosts } from '../lib/wordpress';

const posts = await getPosts();

// Debug: vamos ver o que está a vir
console.log('Posts recebidos:', posts);
console.log('Número de posts:', posts.length);
---

<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Teste WordPress</title>
</head>
<body>
  <h1>Posts do WordPress</h1>
  
  <!-- Debug info -->
  <div style="background: #f0f0f0; padding: 20px; margin: 20px 0;">
    <h3>Debug Info:</h3>
    <p>Número de posts: {posts.length}</p>
    <pre>{JSON.stringify(posts, null, 2)}</pre>
  </div>

  {posts.length === 0 ? (
    <p>Nenhum post encontrado</p>
  ) : (
    <div>
      {posts.map(post => (
        <article style="border: 1px solid #ccc; padding: 20px; margin: 20px 0;">
          <h2>{post.title.rendered}</h2>
          <div set:html={post.excerpt.rendered} />
          <p>Publicado em: {new Date(post.date).toLocaleDateString('pt-PT')}</p>
          <a href={`/blog/${post.slug}`}>Ler mais →</a>
        </article>
      ))}
    </div>
  )}
</body>
</html>